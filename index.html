<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ora√ß√£o de Ben√ß√£o Divina</title>
  <style>
    :root{--overlay:rgba(0,0,0,.45);--card:rgba(17,24,39,.72);--muted:#cbd5e1;--text:#f1f5f9;--primary:#a7f3d0;--accent:#93c5fd;--danger:#fca5a5}
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;min-height:100dvh;color:var(--text);}
    /* Fundo fotogr√°fico sereno */
    .bg{position:fixed;inset:0;background:#0b1020 url('https://images.unsplash.com/photo-1503264116251-35a269479413?auto=format&fit=crop&w=1950&q=80') center/cover no-repeat;}
    .bg::after{content:"";position:absolute;inset:0;background:linear-gradient(180deg,rgba(2,6,23,.4),rgba(2,6,23,.75));}
    .wrap{position:relative;z-index:1;display:grid;place-items:center;min-height:100dvh;padding:24px}
    .card{width:min(860px,96vw);background:var(--card);backdrop-filter:blur(8px);border:1px solid rgba(255,255,255,.08);border-radius:18px;box-shadow:0 20px 60px rgba(0,0,0,.45);overflow:hidden}
    .header{padding:26px 26px 10px}
    h1{margin:0 0 6px;font-size:28px;letter-spacing:.2px}
    p.desc{margin:0;color:var(--muted)}
    p.desc b.highlight{
      color:#fcd34d;
      text-shadow:0 0 8px rgba(252,211,77,0.7);
      animation:pulsarLuz 3s ease-in-out infinite;
    }
    @keyframes pulsarLuz{
      0%,100%{text-shadow:0 0 8px rgba(252,211,77,0.7);}
      50%{text-shadow:0 0 16px rgba(252,211,77,1);}
    }
    .content{padding:18px 22px 6px}
    label{display:block;font-weight:600;margin-bottom:6px}
    input,button{width:100%;border-radius:12px;border:1px solid rgba(255,255,255,.1);background:rgba(4,6,16,.75);color:var(--text);padding:12px 14px;font-size:15px}
    .row{display:flex;gap:12px;flex-wrap:wrap}
    .row>*{flex:1}
    button.primary{
      background:linear-gradient(135deg,var(--primary),#34d399);
      border:none;
      font-weight:700;
      color:#04140f;
      cursor:pointer;
      position:relative;
      transition:all 0.3s ease;
      box-shadow:0 0 0px rgba(52,211,153,0.0);
    }
    button.primary:hover{
      box-shadow:0 0 25px 6px rgba(52,211,153,0.4);
      transform:scale(1.02);
    }
    button.secondary{background:rgba(2,6,23,.6);border:1px solid rgba(255,255,255,.14);cursor:pointer;text-align:center;text-decoration:none;display:inline-flex;align-items:center;justify-content:center}
    button:disabled{opacity:.65;cursor:not-allowed}
    .status{padding:14px 18px;border-top:1px solid rgba(255,255,255,.08);display:flex;align-items:center;gap:10px;color:var(--muted)}
    .error{color:var(--danger)}
    .player{padding:16px 18px}
    .badge{display:inline-block;padding:4px 10px;border-radius:999px;background:rgba(147,197,253,.18);color:var(--accent);font-size:12px;font-weight:700}
    footer{color:var(--muted);font-size:12px;text-align:center;margin-top:14px}

    /* Bot√µes extras (YouTube e WhatsApp) */
    .cta-row{display:flex;gap:12px;flex-wrap:wrap;margin-top:10px}
    .linkbtn{
      width:100%;
      border-radius:12px;
      border:1px solid rgba(255,255,255,.14);
      padding:12px 14px;
      font-size:15px;
      font-weight:700;
      text-align:center;
      cursor:pointer;
      text-decoration:none;
      display:inline-flex;align-items:center;justify-content:center;
      transition:all .25s ease;
      color:#0b0b0b;
    }
    .linkbtn.youtube{background:#ff4455;background:linear-gradient(135deg,#ff6b6b,#ff3b3b); color:#fff;}
    .linkbtn.whatsapp{background:#23d366;background:linear-gradient(135deg,#34d399,#16a34a); color:#04140f;}
    .linkbtn:hover{transform:translateY(-1px); box-shadow:0 8px 20px rgba(0,0,0,.25);}
  </style>
</head>
<body>
  <div class="bg" aria-hidden="true"></div>
  <div class="wrap">
    <div class="card">
      <div class="header">
        <div class="badge">Ora√ß√£o de Ben√ß√£o Divina</div>
        <h1>Ora√ß√£o de Ben√ß√£o Divina</h1>
        <p class="desc">Digite o nome de quem ser√° aben√ßoado e click em <b class="highlight">Ouvir a Ora√ß√£o</b>.</p>
      </div>

      <div class="content">
        <label for="nome">Nome a receber a Ben√ß√£o!</label>
        <input id="nome" placeholder="Ex.: Ana Clara" />
        <div style="height:10px"></div>
        <div class="row">
          <button id="btn-ouvir" class="primary">üéß Ouvir ora√ß√£o</button>
          <a id="btn-download" class="secondary" style="display:none" download>‚¨áÔ∏è Baixar √∫ltimo √°udio (MP3)</a>
        </div>

        <!-- Bot√µes de a√ß√£o -->
        <div class="cta-row">
          <a class="linkbtn youtube" href="https://www.youtube.com/@suajornadaseudestino" target="_blank" rel="noopener">‚ñ∂Ô∏è Canal no YouTube</a>
          <button id="btn-whats" class="linkbtn whatsapp">üü¢ Compartilhar no WhatsApp</button>
        </div>
      </div>

      <div class="player">
        <audio id="player" controls style="width:100%"></audio>
      </div>

      <div class="status" id="status">Pronto. Digite o <b>nome</b> e clique em <b>Ouvir ora√ß√£o</b>.</div>
    </div>
    <footer>Backend: <code>oracaooo.onrender.com</code> ‚Ä¢ Publique este HTML em Netlify/Vercel/GitHub Pages.</footer>
  </div>

  <script>
    const ENDPOINT = "https://oracaooo.onrender.com/tts"; // backend p√∫blico
    const DEFAULT_VOICE_ID = "4YYIPFl9wE5c4L2eu2Gb";

    const DEFAULT_PRAYER_TEXT = `{{nome}} Respire fundo... Agora, receba esta ora√ß√£o.

{{nome}}, o Senhor te chama pelo nome. Que a paz que excede todo entendimento preencha o teu cora√ß√£o. Onde houver medo, que entre a confian√ßa; onde houver dor, que flores√ßa cura; onde houver d√∫vida, que se levante a f√©.

{{nome}}, que a luz de Deus ilumine teus passos hoje e sempre. Am√©m.`;

    const elNome = document.getElementById('nome');
    const elBtnOuvir = document.getElementById('btn-ouvir');
    const elBtnDownload = document.getElementById('btn-download');
    const elPlayer = document.getElementById('player');
    const elStatus = document.getElementById('status');
    const elWhats = document.getElementById('btn-whats');

    let lastBlobUrl = null;
    let audioUnlocked = false;

    async function desbloquearAudio() {
      try {
        const silent = new Audio();
        silent.src = "data:audio/mp3;base64,//uQZAAAAAAAAAAAAAAAAAAAA";
        silent.volume = 0; await silent.play(); silent.pause();
        audioUnlocked = true;
      } catch (e) { console.warn('Desbloqueio de √°udio falhou.', e); }
    }

    const INTRO_SOUND = "https://cdn.pixabay.com/download/audio/2021/08/04/audio_efb52b632a.mp3?filename=soft-bell-tone-6133.mp3";
    const audioIntro = new Audio(INTRO_SOUND); audioIntro.preload = "auto"; audioIntro.volume = 1.0;
    async function tocarSinoComFade(){
      try { await audioIntro.play();
        const fadeDuration=1500, steps=15, step=fadeDuration/steps;
        for(let i=0;i<steps;i++){ await new Promise(r=>setTimeout(r,step)); audioIntro.volume=Math.max(0,audioIntro.volume-(1/steps)); }
        audioIntro.pause(); audioIntro.currentTime=0; audioIntro.volume=1.0;
      } catch(e){ console.warn('Sino bloqueado pelo navegador.'); }
    }

    function renderizarTexto(base, nome){ return base.replace(/\\{\\{\\s*nome\\s*\\}\\}/gi, nome||''); }

    async function gerarAudio(){
      const nome = (elNome.value||'').trim();
      const texto = renderizarTexto(DEFAULT_PRAYER_TEXT, nome);
      if(!audioUnlocked){ await desbloquearAudio(); }
      elStatus.textContent = 'üôè Preparando a ora√ß√£o...';
      await tocarSinoComFade();
      await new Promise(r=>setTimeout(r,500));

      elStatus.textContent = 'Gerando √°udio da ora√ß√£o...';
      try{
        const res = await fetch(ENDPOINT,{ method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify({ text: texto, voiceId: DEFAULT_VOICE_ID })});
        if(!res.ok){ const t=await res.text(); throw new Error(`Erro ${res.status}: ${t}`); }
        const blob = await res.blob();
        if(lastBlobUrl) URL.revokeObjectURL(lastBlobUrl);
        lastBlobUrl = URL.createObjectURL(blob);
        elPlayer.src = lastBlobUrl; try{ await elPlayer.play(); }catch(_){}
        elBtnDownload.href = lastBlobUrl; elBtnDownload.style.display='inline-flex'; elBtnDownload.download = `${(nome||'oracao').replace(/\\s+/g,'_')}.mp3`;
        elStatus.textContent = '‚ú® Ora√ß√£o gerada com sucesso!';
      }catch(e){ elStatus.innerHTML = `<span class="error">Falha ao gerar: ${e.mess
